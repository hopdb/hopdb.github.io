<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js rust">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>HopDB</title>
        
        <meta name="robots" content="noindex" />
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "rust" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="hop.html">Hop</a></li><li class="chapter-item expanded affix "><a href="installation.html">Installation</a></li><li class="chapter-item expanded affix "><a href="clients.html">Clients</a></li><li class="chapter-item expanded "><a href="basics/index.html"><strong aria-hidden="true">1.</strong> Basics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="basics/projects.html"><strong aria-hidden="true">1.1.</strong> Projects</a></li></ol></li><li class="chapter-item expanded "><a href="commands/index.html"><strong aria-hidden="true">2.</strong> Commands</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="commands/append.html"><strong aria-hidden="true">2.1.</strong> append</a></li><li class="chapter-item expanded "><a href="commands/decrement.html"><strong aria-hidden="true">2.2.</strong> decrement</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="commands/decrement_by.html"><strong aria-hidden="true">2.2.1.</strong> decrement:by</a></li></ol></li><li class="chapter-item expanded "><a href="commands/delete.html"><strong aria-hidden="true">2.3.</strong> delete</a></li><li class="chapter-item expanded "><a href="commands/echo.html"><strong aria-hidden="true">2.4.</strong> echo</a></li><li class="chapter-item expanded "><a href="commands/exists.html"><strong aria-hidden="true">2.5.</strong> exists</a></li><li class="chapter-item expanded "><a href="commands/increment.html"><strong aria-hidden="true">2.6.</strong> increment</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="commands/increment_by.html"><strong aria-hidden="true">2.6.1.</strong> increment:by</a></li></ol></li><li class="chapter-item expanded "><a href="commands/is.html"><strong aria-hidden="true">2.7.</strong> is</a></li><li class="chapter-item expanded "><a href="commands/length.html"><strong aria-hidden="true">2.8.</strong> length</a></li><li class="chapter-item expanded "><a href="commands/rename.html"><strong aria-hidden="true">2.9.</strong> rename</a></li><li class="chapter-item expanded "><a href="commands/set.html"><strong aria-hidden="true">2.10.</strong> set</a></li><li class="chapter-item expanded "><a href="commands/stats.html"><strong aria-hidden="true">2.11.</strong> stats</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">HopDB</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        <a href="https://github.com/hopdb/book" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#hop" id="hop">Hop</a></h1>
<p>HopDB is a fast, typed, key-value in-memory database with pubsub, sessions, key
history, and more. It can be run as a standalone server, or as a no-std
in-process engine for uses like local caches and embedded programming.</p>
<p>Check out the <a href="https://github.com/hopdb">GitHub organisation</a> and the <a href="https://github.com/hopdb/hop">source code</a>.</p>
<h1><a class="header" href="#installation" id="installation">Installation</a></h1>
<p>HopDB is available through Cargo and Docker.</p>
<h2><a class="header" href="#cargo" id="cargo">Cargo</a></h2>
<pre><code class="language-sh">$ cargo install hop-server --git https://github.com/hopdb/hop
$ PORT=14000 cargo hop-server
</code></pre>
<h1><a class="header" href="#clients" id="clients">Clients</a></h1>
<p>The following clients are available for languages:</p>
<h2><a class="header" href="#rust" id="rust">Rust</a></h2>
<h3><a class="header" href="#hop-1" id="hop-1">hop</a></h3>
<p><code>hop</code> is the officially supported asynchronous client for Rust.</p>
<p><strong>crates.io</strong>: <a href="https://crates.io/crates/hop">hop</a></p>
<p><strong>repository</strong>: <a href="https://github.com/hopdb/hop/tree/master/client">hopdb/hop</a></p>
<h1><a class="header" href="#basics" id="basics">Basics</a></h1>
<ul>
<li><a href="basics/./projects.html">Projects</a></li>
</ul>
<h1><a class="header" href="#projects" id="projects">Projects</a></h1>
<p>Hop mainly consists of 4 individual projects, which in Rust terms are called
crates. They have different use cases and require different levels of support.
For example, the [engine] runs only on no-std and environments with an allocator,
while the [server] requires the standard library and OS network primitives.</p>
<h3><a class="header" href="#engine" id="engine">Engine</a></h3>
<p>The engine is the heart of Hop. It can run on devices that have an allocator.
It's responsible for maintaining the key state, parsing command requests,
processing them, sending responses, pub/sub and client session management, and
everything else except for networking and I/O like state persistence.</p>
<p>The engine is a crate that can be used like any other Rust library.</p>
<p>Source code: <a href="https://github.com/hopdb/hop/tree/master/engine">https://github.com/hopdb/hop/tree/master/engine</a></p>
<p>Issue tracker: <a href="https://github.com/hopdb/hop/issues?q=is%3Aissue+is%3Aopen+label%3A%22crate%3A+engine%22">@hopdb/hop/issues/crate: engine</a></p>
<h3><a class="header" href="#server" id="server">Server</a></h3>
<p>The server is a light binary that concurrently manages connections and
dispatches their requests to a managed instance of the engine. When the engine
gives back a response, it is sent back to clients.</p>
<p><strong>Source code</strong>: <a href="https://github.com/hopdb/hop/tree/master/server">https://github.com/hopdb/hop/tree/master/server</a></p>
<p><strong>Issue tracker</strong>: <a href="https://github.com/hopdb/hop/issues?q=is%3Aissue+is%3Aopen+label%3A%22crate%3A+server%22">@hopdb/hop/issues/crate: server</a></p>
<h3><a class="header" href="#client" id="client">Client</a></h3>
<p>The client is the main utility of Hop. It is an asynchronous client that
abstracts away the request and response parsing. It supports creating an
&quot;in-memory&quot; client that runs an instance of the engine within it, and also
supports connecting to a server instance and running requests through it.</p>
<p>Here's a quick example of using a client to fire up a local Hop engine,
increment a key, and then decrementing it again:</p>
<pre><pre class="playpen"><code class="language-rust">
<span class="boring">#![allow(unused_variables)]
</span><span class="boring">fn main() {
</span>use hop::Client;

let client = Client::memory();
println!(&quot;New value: {}&quot;, client.increment(&quot;foo&quot;).await?); // value is 1
println!(&quot;New value: {}&quot;, client.decrement(&quot;foo&quot;).await?); // value is 0
<span class="boring">}
</span></code></pre></pre>
<p><strong>Source code</strong>: <a href="https://github.com/hopdb/hop/tree/master/client">https://github.com/hopdb/hop/tree/master/client</a></p>
<p><strong>Issue tracker</strong>: <a href="https://github.com/hopdb/hop/issues?q=is%3Aissue+is%3Aopen+label%3A%22crate%3A+client%22">@hopdb/hop/issues/crate: client</a></p>
<h3><a class="header" href="#cli" id="cli">CLI</a></h3>
<p>The CLI is used to test commands and perform debugging on a server. It can
either create a local instance of the engine and dispatch user-provided input
to it, or connect to a server and dispatch input requests to the server.</p>
<p>Here's a quick example of using the CLI to test the above commands:</p>
<pre><code>&gt; increment foo
1
&gt; decrement foo
0
</code></pre>
<p><strong>Source code</strong>: <a href="https://github.com/hopdb/hop/tree/master/cli">https://github.com/hopdb/hop/tree/master/cli</a></p>
<p><strong>Issue tracker</strong>: <a href="https://github.com/hopdb/hop/issues?q=is%3Aissue+is%3Aopen+label%3A%22crate%3A+cli%22">@hopdb/hop/issues/crate: cli</a></p>
<h1><a class="header" href="#commands" id="commands">commands</a></h1>
<p>Hop includes a number of commands, some of which have subcommands and allow
specifying the key type.</p>
<h1><a class="header" href="#append" id="append">append</a></h1>
<p><strong>Usage</strong>: <code>append[:key_type] &lt;key&gt; [value...]</code></p>
<p><strong>Supported key types</strong>: <code>bytes</code>, <code>list</code>, <code>string</code></p>
<p>The <code>append</code> command appends a value to a key depending on the key's type. If
the key type is a <code>bytes</code>, then the given argument will be appended to the
bytes. If the key type is a <code>list</code>, then the given argument will be appended as
a new item in the list. If the key type is a <code>string</code>, then the given argument
will be appended to the string, but <em>only</em> if the argument is valid UTF-8.</p>
<p>A key and value must both be provided. A key type is optional, but specifying
one will restrict the operation to the key type and error if it is different.</p>
<h2><a class="header" href="#errors" id="errors">Errors</a></h2>
<p>If a key is not specified then a <code>DispatchError::KeyUnspecified</code> is returned.</p>
<p>If no value is provided then a <code>DispatchError::ArgumentRetrieval</code> is returned.</p>
<p>If the command does not support the specified key type then a
<code>DispatchError::KeyTypeInvalid</code> is returned.</p>
<p>If a provided value is of the wrong type then a
<code>DispatchError::KeyTypeDifferent</code> is returned.</p>
<h2><a class="header" href="#examples" id="examples">Examples</a></h2>
<h3><a class="header" href="#cli-1" id="cli-1">CLI</a></h3>
<pre><code>&gt; set:string foo this is a utf-8
this is a utf-8
&gt; append:string foo  valid string! :) # note the extra space
this is a utf-8 valid string! :)
&gt; is:string foo # &quot;foo&quot; is a string
true
&gt; set:list bar item1 item2
item1
item2
&gt; append bar item3 # `append` will append &quot;item3&quot; to the key regardless of its type
item1
item2
item3
</code></pre>
<h3><a class="header" href="#client-1" id="client-1">Client</a></h3>
<pre><pre class="playpen"><code class="language-rust">
<span class="boring">#![allow(unused_variables)]
</span><span class="boring">fn main() {
</span>use hop::{Client, KeyType};

let client = Client::memory();

// set a key named &quot;foo&quot; to a string
client.set(&quot;foo&quot;).str(&quot;this is a utf-8&quot;).await?;

client.append(&quot;foo&quot;).str(&quot; valid string! :)&quot;).await?);

// &quot;foo&quot; is a string
assert!(client.is(KeyType::String).key(&quot;foo&quot;).await?);

client.set(&quot;foo&quot;).list(&amp;[b&quot;item1&quot;.to_vec(), b&quot;item2&quot;.to_vec()]).await?;

// `append` will append &quot;item3&quot; to the key regardless of its type
client.append(&quot;foo&quot;).value(&quot;item3&quot;).await?;
<span class="boring">}
</span></code></pre></pre>
<h1><a class="header" href="#decrement" id="decrement">decrement</a></h1>
<p><strong>Usage</strong>: <code>decrement[:key_type] &lt;key&gt;</code></p>
<p><strong>Supported key types</strong>: <code>float</code>, <code>integer</code></p>
<p>The <code>decrement</code> command takes a key argument and decrements a float or integer
by 1. If the key doesn't already exist, then a default value of 0 is set and
then decremented.</p>
<h2><a class="header" href="#errors-1" id="errors-1">Errors</a></h2>
<p>If a key is not specified, then a <code>DispatchError::KeyUnspecified</code> is returned.</p>
<p>If the command does not support the specified key type, then a
<code>DispatchError::KeyTypeInvalid</code> is returned.</p>
<p>If the type of the key is different than the specified key type, then a
<code>DispatchError::KeyTypeDifferent</code> is returned.</p>
<h2><a class="header" href="#examples-1" id="examples-1">Examples</a></h2>
<h3><a class="header" href="#cli-2" id="cli-2">CLI</a></h3>
<pre><code>&gt; decrement foo # foo will be an integer since that is the default type
-1
&gt; decrement:float foo
Dispatch error: key &quot;foo&quot; is not a float.
&gt; decrement:float bar
-1.0
&gt; decrement bar
-2.0
&gt; decrement foo
-2
</code></pre>
<h3><a class="header" href="#client-2" id="client-2">Client</a></h3>
<pre><pre class="playpen"><code class="language-rust">
<span class="boring">#![allow(unused_variables)]
</span><span class="boring">fn main() {
</span>use hop::{Client, KeyType};

let client = Client::memory();

assert_eq!(-1, client.decrement(&quot;foo&quot;).await?);

// Dispatch error: key &quot;foo&quot; is not a float.
assert!(client.decrement(&quot;foo&quot;).float().await.is_err());

assert!(client.decrement(&quot;bar&quot;).float().await.is_ok());

assert!(client.decrement(&quot;bar&quot;).float().await.is_ok());

assert_eq!(-2, client.decrement(&quot;foo&quot;).int().await?);
<span class="boring">}
</span></code></pre></pre>
<h1><a class="header" href="#decrementby" id="decrementby">decrement:by</a></h1>
<p><strong>Usage</strong>: <code>decrement:by[:key_type] &lt;key&gt; &lt;amount&gt;</code></p>
<p><strong>Supported key types</strong>: <code>float</code>, <code>integer</code></p>
<p>The <code>decrement:by</code> command is a sub-command of <code>decrement</code>, and like <code>decrement</code>
it takes a key argument. An additional argument must be provided which specifies
the amount to decrement the value by. If the key doesn't already exist, then a
default value of 0 is set and then decremented by the specified amount.</p>
<h2><a class="header" href="#errors-2" id="errors-2">Errors</a></h2>
<p>If a key is not specified then a <code>DispatchError::KeyUnspecified</code> is returned.</p>
<p>If an argument is not provided, then a <code>DispatchError::ArgumentRetrieval</code> is
returned.</p>
<p>If a key type is specified but the value of the key is of a different type, then
a <code>DispatchError::KeyTypeDifferent</code> is returned.</p>
<h2><a class="header" href="#examples-2" id="examples-2">Examples</a></h2>
<h3><a class="header" href="#cli-3" id="cli-3">CLI</a></h3>
<pre><code>&gt; decrement:by:int foo 3
-3
&gt; decrement:by:float foo -2.0
Dispatch error: key &quot;foo&quot; is not a float.
&gt; decrement:by:float bar -2.0
-2.0
&gt; decrement:by bar -3.0
-5.0
&gt; decrement:by foo -3
-6
</code></pre>
<h3><a class="header" href="#client-3" id="client-3">Client</a></h3>
<pre><pre class="playpen"><code class="language-rust">
<span class="boring">#![allow(unused_variables)]
</span><span class="boring">fn main() {
</span>use hop::{Client, KeyType};

let client = Client::memory();

assert_eq!(-3, client.decrement(&quot;foo&quot;).int().by(3).await?);

// Dispatch error: key &quot;foo&quot; is not a float.
assert!(client.decrement(&quot;foo&quot;).float().by(2.0).await.is_err());

assert!(client.decrement(&quot;bar&quot;).float().by(2.0).await.is_ok());

assert!(client.decrement(&quot;bar&quot;).float().by(3.0).await.is_ok());

assert_eq!(-6, client.decrement(&quot;foo&quot;).int().by(3).await?);
<span class="boring">}
</span></code></pre></pre>
<h1><a class="header" href="#delete" id="delete">delete</a></h1>
<p><strong>Usage</strong>: <code>delete &lt;key&gt;</code></p>
<p><strong>Supported key types</strong>: none</p>
<p>The <code>delete</code> command deletes a key by name. A key type can't be specified, and
regardless of type the key will be deleted if it exists. The key's name is
returned on success as confirmation.</p>
<h2><a class="header" href="#errors-3" id="errors-3">Errors</a></h2>
<p>If a key type is specified then a <code>DispatchError::KeyTypeUnexpected</code> is
returned.</p>
<p>If a key is not specified then a <code>DispatchError::KeyUnspecified</code> is returned.</p>
<p>If the key does not exist then a <code>DispatchError::PreconditionFailed</code> is
returned.</p>
<h2><a class="header" href="#examples-3" id="examples-3">Examples</a></h2>
<h3><a class="header" href="#cli-4" id="cli-4">CLI</a></h3>
<pre><code>&gt; set:list foo item1 item2 item1
item1
item2
item1
&gt; exists foo
true
&gt; delete foo
foo
&gt; exists foo
false
</code></pre>
<h1><a class="header" href="#echo" id="echo">echo</a></h1>
<p><strong>Usage</strong>: <code>echo [argument...]</code></p>
<p><strong>Supported key types</strong>: none</p>
<p>The <code>echo</code> command echoes back the provided arguments as a list of the same
arguments. If no arguments are echoed, then an empty list is returned. A key
type can't be specified.</p>
<h2><a class="header" href="#errors-4" id="errors-4">Errors</a></h2>
<p>This command doesn't error.</p>
<h2><a class="header" href="#examples-4" id="examples-4">Examples</a></h2>
<h3><a class="header" href="#cli-5" id="cli-5">CLI</a></h3>
<pre><code>&gt; echo foo bar baz
foo
bar
baz
&gt; echo echo
echo
&gt; echo

</code></pre>
<h1><a class="header" href="#exists" id="exists">exists</a></h1>
<p><strong>Usage</strong>: <code>exists &lt;key&gt; [keys...]</code></p>
<p><strong>Supported key types</strong>: none</p>
<p>The <code>exists</code> command checks if all of the provided key names exist. If at least
one key does not exist, then <code>false</code> is returned, otherwise <code>true</code> is returned.</p>
<p>At least one key must be provided, up to the global limit of 255. If you need to
check that more exist, use multiple commands.</p>
<h2><a class="header" href="#errors-5" id="errors-5">Errors</a></h2>
<p>If a key type is specified then a <code>DispatchError::KeyTypeUnexpected</code> is
returned.</p>
<p>If no key is provided then a <code>DispatchError::ArgumentRetrieval</code> is returned.</p>
<h2><a class="header" href="#examples-5" id="examples-5">Examples</a></h2>
<h3><a class="header" href="#cli-6" id="cli-6">CLI</a></h3>
<pre><code>&gt; set:bool foo false
false
&gt; exists foo
true
&gt; set:map bar a b c d
a=b
c=d
&gt; exists foo bar
true
&gt; exists foo bar baz
false
</code></pre>
<h1><a class="header" href="#increment" id="increment">increment</a></h1>
<p><strong>Usage</strong>: <code>decrement[:key_type] &lt;key&gt;</code></p>
<p><strong>Supported key types</strong>: <code>float</code>, <code>integer</code></p>
<p>The <code>increment</code> command takes a key argument and increments a float or integer
by 1. If the key doesn't already exist, then a default value of 0 is set and
then incremented.</p>
<h2><a class="header" href="#errors-6" id="errors-6">Errors</a></h2>
<p>If a key is not specified, then a <code>DispatchError::KeyUnspecified</code> is returned.</p>
<p>If the command does not support the specified key type, then a
<code>DispatchError::KeyTypeInvalid</code> is returned.</p>
<p>If the type of the key is different than the specified key type, then a
<code>DispatchError::KeyTypeDifferent</code> is returned.</p>
<h2><a class="header" href="#examples-6" id="examples-6">Examples</a></h2>
<h3><a class="header" href="#cli-7" id="cli-7">CLI</a></h3>
<pre><code>&gt; increment foo # foo will be an integer since that is the default type
1
&gt; increment:float foo
Dispatch error: key &quot;foo&quot; is not a float.
&gt; increment:float bar
1.0
&gt; increment bar
2.0
&gt; increment foo
2
</code></pre>
<h3><a class="header" href="#client-4" id="client-4">Client</a></h3>
<pre><pre class="playpen"><code class="language-rust">
<span class="boring">#![allow(unused_variables)]
</span><span class="boring">fn main() {
</span>use hop::{Client, KeyType};

let client = Client::memory();

assert_eq!(1, client.increment(&quot;foo&quot;).await?);

// Dispatch error: key &quot;foo&quot; is not a float.
assert!(client.increment(&quot;foo&quot;).float().await.is_err());

assert!(client.increment(&quot;bar&quot;).float().await.is_ok());

assert!(client.increment(&quot;bar&quot;).float().await.is_ok());

assert_eq!(2, client.increment(&quot;foo&quot;).int().await?);
<span class="boring">}
</span></code></pre></pre>
<h1><a class="header" href="#incrementby" id="incrementby">increment:by</a></h1>
<p><strong>Usage</strong>: <code>increment:by[:key_type] &lt;key&gt; &lt;amount&gt;</code></p>
<p><strong>Supported key types</strong>: <code>float</code>, <code>integer</code></p>
<p>The <code>increment:by</code> command is a sub-command of <code>increment</code>, and like <code>increment</code>
it takes a key argument. An additional argument must be provided which specifies
the amount to increment the value by. If the key doesn't already exist, then a
default value of 0 is set and then incremented by the specified amount.</p>
<h2><a class="header" href="#errors-7" id="errors-7">Errors</a></h2>
<p>If a key is not specified then a <code>DispatchError::KeyUnspecified</code> is returned.</p>
<p>If a value is not specified then a <code>DispatchError::ArgumentRetrieval</code> is
returned.</p>
<p>If the key type was specified and it is different than the key's type a
<code>DispatchError::KeyTypeDifferent</code> is returned.</p>
<h2><a class="header" href="#examples-7" id="examples-7">Examples</a></h2>
<h3><a class="header" href="#cli-8" id="cli-8">CLI</a></h3>
<pre><code>&gt; increment:by foo 3 # foo will be an integer since that is the default type
3
&gt; increment:by:float foo 2.0
Dispatch error: key &quot;foo&quot; is not a float.
&gt; increment:by:float bar 2.0
2.0
&gt; increment:by bar 3.0
5.0
&gt; increment:by foo 3
6
</code></pre>
<h3><a class="header" href="#client-5" id="client-5">Client</a></h3>
<pre><pre class="playpen"><code class="language-rust">
<span class="boring">#![allow(unused_variables)]
</span><span class="boring">fn main() {
</span>use hop::{Client, KeyType};

let client = Client::memory();

assert_eq!(3, client.increment(&quot;foo&quot;).int().by(3).await?);

// Dispatch error: key &quot;foo&quot; is not a float.
assert!(client.increment(&quot;foo&quot;).float().by(2.0).await.is_err());

assert!(client.increment(&quot;bar&quot;).float().by(2.0).await.is_ok());

assert!(client.increment(&quot;bar&quot;).float().by(3.0).await.is_ok());

assert_eq!(6, client.increment(&quot;foo&quot;).int().by(3).await?);
<span class="boring">}
</span></code></pre></pre>
<h1><a class="header" href="#is" id="is">is</a></h1>
<p><strong>Usage</strong>: <code>is&lt;:key_type&gt; &lt;key&gt; [keys...]</code></p>
<p><strong>Supported key types</strong>: <code>boolean</code>, <code>bytes</code>, <code>float</code>, <code>integer</code>, <code>list</code>, <code>map</code>,
<code>set</code>, <code>string</code></p>
<p>The <code>is</code> command checks if all of the provided key names are of a certain key
type. If at least one key does not exist or is not the specified key type,
then <code>false</code> is returned, otherwise <code>true</code> is returned.</p>
<p>At least one key must be provided. A key type must also be provided.</p>
<h2><a class="header" href="#errors-8" id="errors-8">Errors</a></h2>
<p>If a key type is not specified, then a <code>DispatchError::KeyTypeRequired</code> error is
returned.</p>
<p>If no arguments are provided, then a <code>DispatchError::ArgumentRetrieval</code> error is
returned.</p>
<h2><a class="header" href="#examples-8" id="examples-8">Examples</a></h2>
<h3><a class="header" href="#cli-9" id="cli-9">CLI</a></h3>
<pre><code>&gt; set:bool foo false
false
&gt; is:bool foo # foo is a bool
true
&gt; is:int foo # foo is not an int
false
&gt; set:int bar 123
123
&gt; is:bool foo bar # foo is a bool, but bar is not
false
&gt; is:bool foo baz # foo is a bool, but baz does not exist
false
</code></pre>
<h3><a class="header" href="#client-6" id="client-6">Client</a></h3>
<pre><pre class="playpen"><code class="language-rust">
<span class="boring">#![allow(unused_variables)]
</span><span class="boring">fn main() {
</span>use hop::{Client, KeyType};

let client = Client::memory();

// set a key named &quot;foo&quot; to a boolean with a value of false
client.set(&quot;foo&quot;).bool(false).await?;

// foo is a bool
assert!(client.is(KeyType::Boolean).key(&quot;foo&quot;).await?);

// foo is not an int
assert!(!client.is(KeyType::Integer).key(&quot;foo&quot;).await?);

// set a key named &quot;bar&quot; to an integer with a value of 123
client.set(&quot;bar&quot;).int(123).await?;

// foo is a bool, but bar is not
assert!(!client.is(KeyType::Boolean).keys(&amp;[&quot;foo&quot;, &quot;bar&quot;]).await?);

// foo is a bool, but baz does not exist
assert!(!client.is(KeyType::Boolean).keys(&amp;[&quot;foo&quot;, &quot;baz&quot;]).await?);
<span class="boring">}
</span></code></pre></pre>
<h1><a class="header" href="#length" id="length">length</a></h1>
<p><strong>Usage</strong>: <code>length[:key_type] &lt;key&gt;</code></p>
<p><strong>Supported key types</strong>: <code>bytes</code>, <code>list</code>, <code>map</code>, <code>set</code>, <code>string</code></p>
<p>The <code>length</code> command returns the length of some bytes, a list, map, set, or
string. A key type can be specified to limit the operation to only calculating
the length of the key if it matches the specified type.</p>
<h2><a class="header" href="#errors-9" id="errors-9">Errors</a></h2>
<p>If a key is not specified then a <code>DispatchError::KeyUnspecified</code> is returned.</p>
<p>If a specified key type is not supported than a <code>DispatchError::KeyTypeInvalid</code>
is returned.</p>
<p>If the specified key does not exist thyen a <code>DispatchError::KeyNonexistent</code>
is returned.</p>
<p>If the key type of the key is different than the specified key type then a
<code>DispatchError::KeyTypeDifferent</code> is returned.</p>
<h2><a class="header" href="#examples-9" id="examples-9">Examples</a></h2>
<h3><a class="header" href="#cli-10" id="cli-10">CLI</a></h3>
<pre><code>&gt; set:map foo key1 value1 key2 value2
key1=value1 key2=value2
&gt; length foo
2
&gt; length:list foo
Dispatch error: the key &quot;foo&quot; isn't a List.
&gt; set:set bar item1 item2 item1
item1 item2
&gt; length:set foo
2
</code></pre>
<h1><a class="header" href="#rename" id="rename">rename</a></h1>
<p><strong>Usage</strong>: <code>rename &lt;from&gt; &lt;to&gt;</code></p>
<p><strong>Supported key types</strong>: none</p>
<p>The <code>rename</code> command renames a key by moving the value from one key to another.
The source key must exist, and the destination key must not already be taken.</p>
<p>The destination key name is returned on success as confirmation.</p>
<h2><a class="header" href="#errors-10" id="errors-10">Errors</a></h2>
<p>If a key type is specified then a <code>DispatchError::KeyTypeUnexpected</code> is
returned.</p>
<p>If a source key is not specified then a <code>DispatchError::KeyUnspecified</code> is
returned.</p>
<p>If a destination key is not specified then a <code>DispatchError::ArgumentRetrieval</code>
is returned.</p>
<p>If the source key does not exist then a <code>DispatchError::KeyNonexistent</code> is
returned.</p>
<p>If the destination key does not exist then a <code>DispatchError::PreconditionFailed</code>
is returned.</p>
<h2><a class="header" href="#examples-10" id="examples-10">Examples</a></h2>
<h3><a class="header" href="#cli-11" id="cli-11">CLI</a></h3>
<pre><code>&gt; rename
The key to rename is required.
&gt; rename foo bar
Dispatch error: key &quot;foo&quot; doesn't exist.
&gt; set:int foo 123
123
&gt; rename foo bar
bar
&gt; set:int foo 456
456
&gt; rename foo bar
Dispatch error: the destination key, &quot;bar&quot;, already exists.
</code></pre>
<h1><a class="header" href="#set" id="set">set</a></h1>
<p><strong>Usage</strong>: <code>set[:key_type] &lt;key&gt; &lt;value...&gt;</code></p>
<p><strong>Supported key types</strong>: <code>boolean</code>, <code>bytes</code>, <code>float</code>, <code>integer</code>, <code>list</code>, <code>map</code>,
<code>set</code>, <code>string</code></p>
<p>The <code>set</code> command sets a value to a key, overriding the existing key's value if
one exists. The <code>set</code> command supports setting values of all types.</p>
<p>A key and value must both be provided. A key type is optional, and the default
type is raw bytes.</p>
<h2><a class="header" href="#errors-11" id="errors-11">Errors</a></h2>
<p>If a key type is not specified then a <code>DispatchError::KeyUnspecified</code> error is
returned.</p>
<p>If no value is provided then a <code>DispatchError::ArgumentRetrieval</code> error is
returned.</p>
<p>If a provided value is of the wrong type then a
<code>DispatchError::KeyTypeDifferent</code> error is returned.</p>
<h2><a class="header" href="#examples-11" id="examples-11">Examples</a></h2>
<h3><a class="header" href="#cli-12" id="cli-12">CLI</a></h3>
<pre><code>&gt; set:bool foo true
true
&gt; is:bool foo # &quot;foo&quot; is a bool
true
&gt; set:int foo 123 # now set &quot;foo&quot; to an integer value of 123
123
&gt; is:int foo # &quot;foo&quot; is now an integer
true
&gt; set:list foo bar baz # now set &quot;foo&quot; to a list with items &quot;bar&quot; and &quot;baz&quot;
a=b
c=d
</code></pre>
<h3><a class="header" href="#client-7" id="client-7">Client</a></h3>
<pre><pre class="playpen"><code class="language-rust">
<span class="boring">#![allow(unused_variables)]
</span><span class="boring">fn main() {
</span>use hop::{Client, KeyType};

let client = Client::memory();

// set a key named &quot;foo&quot; to a boolean with a value of true
client.set(&quot;foo&quot;).bool(true).await?;

// &quot;foo&quot; is a bool
assert!(client.is(KeyType::Boolean).key(&quot;foo&quot;).await?);

// now set &quot;foo&quot; to an integer value of 123
client.set(&quot;foo&quot;).int(123).await?;

// &quot;foo&quot; is now an integer
assert!(client.is(KeyType::Integer).key(&quot;foo&quot;).await?);

// now set &quot;foo&quot; to a list with items &quot;bar&quot; and &quot;baz&quot;
client.set(&quot;foo&quot;).list([b&quot;bar&quot;.to_vec(), b&quot;baz&quot;.to_vec()]).await?;
<span class="boring">}
</span></code></pre></pre>
<h1><a class="header" href="#stats" id="stats">stats</a></h1>
<p><strong>Usage</strong>: <code>stats</code></p>
<p><strong>Supported key types</strong>: none</p>
<p>The <code>stats</code> command returns a Map of statistics about the Hop instance. The Hop
engine maintains metrics about operations and its current state.</p>
<p>The following statistics are returned:</p>
<ul>
<li><strong>commands_successful</strong>: an integer containing the number of successful
commands that have been processed.</li>
<li><strong>commands_errored</strong>: an integer containing the number of processed commands
that have errored.</li>
<li><strong>sessions_started</strong>: the number of new client sessions that have been
initiated.</li>
<li><strong>sessions_ended</strong>: the number of client sessions that have finished for one
reason or another.</li>
</ul>
<h2><a class="header" href="#errors-12" id="errors-12">Errors</a></h2>
<p>If a key type is specified then a <code>DispatchError::KeyTypeUnexpected</code> is
returned.</p>
<h2><a class="header" href="#examples-12" id="examples-12">Examples</a></h2>
<h3><a class="header" href="#cli-13" id="cli-13">CLI</a></h3>
<pre><code class="language-python">&gt; set:int foo 1234
1234
&gt; stats
Commands successful: 1
Commands errored: 0
Sessions started: 0
Sessions ended: 0
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
